<html>
<head>
  <title>文件和异常</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/607595 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="852"/>
<h1>文件和异常</h1>

<div>
<span><div>文件和异常</div><div><br/></div><div><br/></div><div><br/></div><div>1、读取整个文件：</div><div>例：</div><div><img src="文件和异常_files/Image.png" type="image/png" data-filename="Image.png"/></div><div>open('pi_digits.txt')返回一个表示文件的对象</div><div>with在不需要访问文件后将其关闭，同时也可以使用close()来关闭文件</div><div><br/></div><div>2、文件路径：</div><div><img src="文件和异常_files/Image [1].png" type="image/png" data-filename="Image.png"/></div><div><img src="文件和异常_files/Image [2].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>3、逐行读取：</div><div><img src="文件和异常_files/Image [3].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div>4、创建一个包含文件各行内容的列表：</div><div><img src="文件和异常_files/Image [4].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>5、包含100万位的大型文件</div><div><img src="文件和异常_files/Image [5].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>写入文件：</div><div>1、写入空文件：</div><div><img src="文件和异常_files/Image [6].png" type="image/png" data-filename="Image.png"/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">注：<span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: ??Regular; color: rgb(0,0,0);">在这个示例中，调用</span><span style="mso-spacerun: 'yes'; font-size: 7.69436pt; font-family: CourierNewRegular; color: rgb(0,0,0);">open()</span> <span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: ??Regular; color: rgb(0,0,0);">时提供了两个实参（见</span><span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: MSUIGothicRegular; color: rgb(0,0,0);">❶</span><span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: ??Regular; color: rgb(0,0,0);">）。第一个实参也是要打开的文件的名称；第二个实参（</span><span style="mso-spacerun: 'yes'; font-size: 7.69436pt; font-family: CourierNewRegular; color: rgb(0,0,0);">'w'</span> <span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: ??Regular; color: rgb(0,0,0);">）告诉</span><span style="mso-spacerun: 'yes'; font-size: 8.12182pt; font-family: TimesNewRomanRegular; color: rgb(0,0,0);">Python</span><span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: ??Regular; color: rgb(0,0,0);">，我们要以</span><span style="font-family: unset; font-size: 6.83943pt;">写</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">入</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">模</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">式</span><span style="font-family: unset; font-size: 6.83943pt;">打开这个文件。打开文件</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">时，可指定</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">读</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">取</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">模</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">式</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">读</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">（</span><span style="color: unset; font-size: 7.69436pt; font-family: CourierNewRegular;">'r'</span> <span style="color: unset; font-family: unset; font-size: 6.83943pt;">）、</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">写</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">入</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">模</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">式</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">写</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">（</span><span style="color: unset; font-size: 7.69436pt; font-family: CourierNewRegular;">'w'</span> <span style="color: unset; font-family: unset; font-size: 6.83943pt;">）、</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">附</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">加</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">模</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">式</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">附</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">（</span><span style="color: unset; font-size: 7.69436pt; font-family: CourierNewRegular;">'a'</span> <span style="color: unset; font-family: unset; font-size: 6.83943pt;">）或让你能够读取和写入文件的模式（</span><span style="color: unset; font-size: 7.69436pt; font-family: CourierNewRegular;">'r+'</span> <span style="color: unset; font-family: unset; font-size: 6.83943pt;">）。如果你省略了模式实参，</span><span style="color: unset; font-size: 8.12182pt; font-family: TimesNewRomanRegular;">Python</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">将以默认的只读模式打</span><span style="color: unset; font-family: unset; font-size: 6.83943pt;">开文件。</span></span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: ??Regular; color: rgb(0,0,0);">如果你要写入的文件不存在，函数</span><span style="mso-spacerun: 'yes'; font-size: 7.69436pt; font-family: CourierNewRegular; color: rgb(0,0,0);">open()</span> <span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: ??Regular; color: rgb(0,0,0);">将自动创建它。然而，以写入（</span><span style="mso-spacerun: 'yes'; font-size: 7.69436pt; font-family: CourierNewRegular; color: rgb(0,0,0);">'w'</span> <span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: ??Regular; color: rgb(0,0,0);">）模式打开文件时千万要小心，因为如果指定的文件已经存在，</span><span style="mso-spacerun: 'yes'; font-size: 8.12182pt; font-family: TimesNewRomanRegular; color: rgb(0,0,0);">Python</span><span style="mso-spacerun: 'yes'; font-size: 6.83943pt; font-family: ??Regular; color: rgb(0,0,0);">将在返回文件对象前清空</span><span style="font-size: 6.83943pt; font-family: unset;">该文件。</span></span></div><div><br/></div><div>2、附加到文件：</div><div><img src="文件和异常_files/Image [7].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>异常：</div><div>1、处理ZeroDivisionError异常：</div><div><img src="文件和异常_files/Image [8].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div>2、使用异常避免崩溃：</div><div><img src="文件和异常_files/Image [9].png" type="image/png" data-filename="Image.png"/></div><div>通过使用else来避免它：</div><div><img src="文件和异常_files/Image [10].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>3、处理FileNotFoundError异常：</div><div>例：</div><div><img src="文件和异常_files/Image [11].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>4、分析文本：</div><div>例：</div><div><img src="文件和异常_files/Image [12].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div>5、处理到异常时忽略不返回给用户看：</div><div><img src="文件和异常_files/Image [13].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div>存储数据：</div><div>1、使用json.jump()和json.load()：</div><div>存取：</div><div><img src="文件和异常_files/Image [14].png" type="image/png" data-filename="Image.png"/></div><div>读取：</div><div><img src="文件和异常_files/Image [15].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div><br/></div><div>2、保存和读取用户生成的数据：</div><div><img src="文件和异常_files/Image [16].png" type="image/png" data-filename="Image.png"/></div><div><img src="文件和异常_files/Image [17].png" type="image/png" data-filename="Image.png"/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 